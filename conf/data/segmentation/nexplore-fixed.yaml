data:
  task: segmentation
  class: nexplore.NexploreS3DISFusedDataset
#  dataroot: C:\Users\mpautzke\Data\points3d
  dataroot: E:\SensatUrbanDataset
  preprocess_threads: 0 # set to 0 to use as many CPU threads as are available on your system
  train:
    samples_per_epoch: 50
    radius: 20
    areas:
#      "a40",
#      "a40_fs",
#      "tule_fs",
#      "dover_flint",
#      "dutch_john",
#      "handford_2",
#      "handford_1",
#      "floral_ave_fs",
#      "houston",
#      "orange_ave_connector",
#      "orange_oregon",
#      "peach",
#      "toronto",
      sensat_birminghan_01:
      sensat_birminghan_02:
      sensat_birminghan_03:
      sensat_birminghan_04:
      sensat_birminghan_05:
      sensat_cambridge_02:
      sensat_cambridge_01:
      sensat_cambridge_03:
      sensat_cambridge_04:
      sensat_cambridge_05:
      sensat_cambridge_06:
      sensat_cambridge_07:
      sensat_cambridge_08:
      sensat_cambridge_09:
      sensat_cambridge_10:
      sensat_cambridge_11:
      sensat_cambridge_12:
#      "tule_fs_test"
#      tule_test:
#      "tule_hp"


  val:
    samples_per_epoch: 20
    radius: 20
    areas:
#      "a40",
#      "dover_flint",
#      "dutch_john",
#      "handford_2",
#      "handford_1",
#      "floral_ave_fs",
#      "houston",
#      "orange_ave_connector",
#      "orange_oregon",
#      "peach",
#      "tule_fs",
#      "toronto",
#      sensat_birminghan_01:
#      "sensat_birminghan_02",
#      "sensat_birminghan_03",
#      "sensat_birminghan_04",
#      "sensat_birminghan_05",
#      "sensat_cambridge_01",
#      "sensat_cambridge_02",
#      "sensat_cambridge_03",
#      "sensat_cambridge_04",
#      "sensat_cambridge_05",
#      "sensat_cambridge_06",
#      "sensat_cambridge_07",
#      "sensat_cambridge_08",
#      "sensat_cambridge_09",
#      "sensat_cambridge_10",
#      "sensat_cambridge_11"
      sensat_birminghan_val_01:
      sensat_cambridge_val_01:
      sensat_cambridge_val_02:
#      "tule_fs_test"
       tule_test:
#      "tule_hp"

  test:
    samples_per_epoch: 25
    radius: 20 # requires regen
    areas:
#        "tule",
#        "taktkeller"
#         "toronto_2"

  object_labels: [
    "other",
    "road",
    "car",
    "vegetation",
    "building",
    "water",
    "ground"
  ]
  object_labels_map: [
    ["other"],
    ["road", "parking", "bridge"],
    ["car"],
    ["vegetation"],
    ["building"],
    ["water"],
    ["ground"]
  ]
  first_subsampling: 0.04 # requires regen
  lowres_subsampling: 0.4 # requires regen
  use_category: False # Not used for nexplore
  pre_collate_transform: # requires regen
      - transform: PointCloudFusion   # One point cloud per area
      - transform: SaveOriginalPosId    # Required so that one can recover the original point in the fused point cloud
      - transform: GridSampling3D       # Samples on a grid
        params:
            size: ${data.first_subsampling}
  train_transforms:
    - transform: FixedPoints
      lparams: [30000]
    - transform: RandomNoise
      params:
        sigma: 0.001
    - transform: RandomRotate
      params:
        degrees: 180
        axis: 2
    - transform: RandomScaleAnisotropic
      params:
        scales: [0.8, 1.2]
    - transform: RandomSymmetry
      params:
        axis: [True, False, False]
    - transform: DropFeature
      params:
        drop_proba: 0.2
        feature_name: rgb
    - transform: XYZFeature
      params:
        add_x: False
        add_y: False
        add_z: True
    - transform: AddFeatsByKeys
      params:
        list_add_to_x: [True, True]
        feat_names: [rgb, pos_z]
        delete_feats: [True, True]
    - transform: Center
    - transform: ScalePos
      params:
        scale: 0.5
  test_transform:
    - transform: FixedPoints
      lparams: [30000]
    - transform: XYZFeature
      params:
        add_x: False
        add_y: False
        add_z: True
    - transform: AddFeatsByKeys
      params:
        list_add_to_x: [True, True]
        feat_names: [rgb, pos_z]
        delete_feats: [True, True]
    - transform: Center
    - transform: ScalePos
      params:
        scale: 0.5
  val_transform: ${data.test_transform}